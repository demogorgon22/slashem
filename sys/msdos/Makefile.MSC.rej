***************
*** 1,8 ****
! #	SCCS Id: @(#)Makefile.MSC	      3.3     1999/11/06
! #	Copyright (c) NetHack PC Development Team 1997.
  #	PC NetHack 3.3 Makefile for MSC
  #
! #	For questions or comments: nethack-bugs@linc.cis.upenn.edu
  #
  #	In addition to your C compiler,
  #
--- 1,8 ----
! #	SCCS Id: @(#)Makefile.MSC	      3.3     2000/08/02
! #	Copyright (c) NetHack PC Development Team 1997, 2000.
  #	PC NetHack 3.3 Makefile for MSC
  #
! #	For questions or comments: nethack-bugs@nethack.org
  #
  #	In addition to your C compiler,
  #
***************
*** 60,70 ****
  YTABH  = y_tab.h
  LEXYYC = lexyy.c
  
- #
- # Uncomment the line below if you want to store all the level files,
- # help files, etc. in a single library file.
  
! USE_DLB = Y
  
  #############################################################################
  #
--- 60,71 ----
  YTABH  = y_tab.h
  LEXYYC = lexyy.c
  
  
! #
! # Uncomment this line if you want to include support for ALT-numeric
! # sequences, such as ALT-2 for toggling #twoweapon mode.  
! # Note that this code did not get a thorough testing prior to 3.3.1
! #NEWALT=/DNEW_ALT
  
  #############################################################################
  #
***************
*** 89,94 ****
  MVTRCL =
  ! ENDIF
  
  LIBRARIES = $(LIBS) $(TERMLIB)
  
  GAMEFILE = $(GAMEDIR)\$(GAME).exe
--- 90,107 ----
  MVTRCL =
  ! ENDIF
  
+ #
+ # Uncomment the line below if you want to store all the level files,
+ # help files, etc. in a single library file.
+ 
+ USE_DLB = Y
+ 
+ ! IF ("$(USE_DLB)"=="Y")
+ DLBFLG = -DDLB
+ ! ELSE
+ DLBFLG =
+ ! ENDIF
+ 
  LIBRARIES = $(LIBS) $(TERMLIB)
  
  GAMEFILE = $(GAMEDIR)\$(GAME).exe
***************
*** 97,109 ****
  #  Flags.
  #
  # Debugging
! #CFLAGS = -pg -c -I../include $(DLBFLG) -DUSE_TILES
! #LFLAGS = -pg
  
  #    Normal
- #CFLAGS = -c -O -I../include $(DLBFLG) -DUSE_TILES
- #LFLAGS =
- #LFLAGS = /NOI/MAP/SE:400 /CPARM:1 /INFO
  LFLAGS = /NOI/MAP /CPARM:1 /INFO
  CFLAGS = /DFUNCTION_LEVEL_LINKING /DUSE_TILES /DDLB
  SPECOPTS =
--- 110,119 ----
  #  Flags.
  #
  # Debugging
! #CFLAGS = /Zi /DFUNCTION_LEVEL_LINKING /DUSE_TILES /DDLB
! #LFLAGS = /CODEVIEW /NOI/MAP /CPARM:1 /INFO
  
  #    Normal
  LFLAGS = /NOI/MAP /CPARM:1 /INFO
  CFLAGS = /DFUNCTION_LEVEL_LINKING /DUSE_TILES /DDLB
  SPECOPTS =
***************
*** 247,253 ****
  	     $(INCL)\attrib.h	$(INCL)\you.h
  DISPLAY_H  = $(MONDATA_H)	$(INCL)\vision.h    $(INCL)\display.h
  PCCONF_H   = $(INCL)\micro.h	$(INCL)\system.h    $(INCL)\pcconf.h \
! 	    $(INCL)\pcvideo.h
  CONFIG_H   = $(GLOBAL_H)	$(INCL)\tradstdc.h  $(INCL)\config1.h \
  	    $(INCL)\config.h
  DECL_H	   = $(YOU_H)		$(INCL)\spell.h	    $(INCL)\color.h   \
--- 257,263 ----
  	     $(INCL)\attrib.h	$(INCL)\you.h
  DISPLAY_H  = $(MONDATA_H)	$(INCL)\vision.h    $(INCL)\display.h
  PCCONF_H   = $(INCL)\micro.h	$(INCL)\system.h    $(INCL)\pcconf.h \
! 	    $(MSYS)\pcvideo.h
  CONFIG_H   = $(GLOBAL_H)	$(INCL)\tradstdc.h  $(INCL)\config1.h \
  	    $(INCL)\config.h
  DECL_H	   = $(YOU_H)		$(INCL)\spell.h	    $(INCL)\color.h   \
***************
*** 261,267 ****
  	      $(INCL)\engrave.h	 $(INCL)\rect.h	  \
  	       $(INCL)\trampoli.h $(INCL)\hack.h
  DLB_H      = $(INCL)\dlb.h
! TILE_H	   = $(INCL)\tile.h $(INCL)\pctiles.h
  
  
  # Make Roolz dude.
--- 271,277 ----
  	      $(INCL)\engrave.h	 $(INCL)\rect.h	  \
  	       $(INCL)\trampoli.h $(INCL)\hack.h
  DLB_H      = $(INCL)\dlb.h
! TILE_H	   = $(WSHR)\tile.h $(MSYS)\pctiles.h
  
  
  # Make Roolz dude.
***************
*** 278,313 ****
  
  
  .c{$(OBJ)}.o:
! 	$(CC) $(CFLAGS) $(SPECOPTS) /Fo$@ $<
  
  .c.o:
! 	$(CC) $(CFLAGS) $(SPECOPTS) /Fo$@ $<
  
  {$(SRC)}.c{$(OBJ)}.o:
! 	$(CC) $(CFLAGS) $(SPECOPTS) /Fo$@ $<
  
  {$(SRC)}.c.o:
! 	$(CC) $(CFLAGS) $(SPECOPTS) /Fo$@ $<
  
  #
  # Rules for files in sys\share
  #
  
  {$(SYS)}.c{$(OBJ)}.o:
! 	$(CC) $(CFLAGS) $(SPECOPTS) /Fo$@ $<
  
  {$(SYS)}.c.o:
! 	$(CC) $(CFLAGS) $(SPECOPTS) /Fo$@ $<
  
  #
  # Rules for files in sys\msdos
  #
  
  {$(MSYS)}.c{$(OBJ)}.o:
! 	$(CC) $(CFLAGS) $(SPECOPTS) /Fo$@ $<
  
  {$(MSYS)}.c.o:
! 	$(CC) $(CFLAGS) $(SPECOPTS) /Fo$@ $<
  
  {$(MSYS)}.h{$(INCL)}.h:
  	@copy $< $@
--- 288,323 ----
  
  
  .c{$(OBJ)}.o:
! 	@$(CC) $(CFLAGS) $(SPECOPTS) /Fo$@ $<
  
  .c.o:
! 	@$(CC) $(CFLAGS) $(SPECOPTS) /Fo$@ $<
  
  {$(SRC)}.c{$(OBJ)}.o:
! 	@$(CC) $(CFLAGS) $(SPECOPTS) /Fo$@ $<
  
  {$(SRC)}.c.o:
! 	@$(CC) $(CFLAGS) $(SPECOPTS) /Fo$@ $<
  
  #
  # Rules for files in sys\share
  #
  
  {$(SYS)}.c{$(OBJ)}.o:
! 	@$(CC) $(CFLAGS) $(SPECOPTS) /Fo$@ $<
  
  {$(SYS)}.c.o:
! 	@$(CC) $(CFLAGS) $(SPECOPTS) /Fo$@ $<
  
  #
  # Rules for files in sys\msdos
  #
  
  {$(MSYS)}.c{$(OBJ)}.o:
! 	@$(CC) $(CFLAGS) $(SPECOPTS) /Fo$@ $<
  
  {$(MSYS)}.c.o:
! 	@$(CC) $(CFLAGS) $(SPECOPTS) /Fo$@ $<
  
  {$(MSYS)}.h{$(INCL)}.h:
  	@copy $< $@
***************
*** 317,336 ****
  #
  
  {$(UTIL)}.c{$(OBJ)}.o:
! 	$(CC) $(CFLAGS) $(SPECOPTS) /Fo$@ $<
  
  {$(UTIL)}.c.o:
! 	$(CC) $(CFLAGS) $(SPECOPTS) /Fo$@ $<
  
  #
  # Rules for files in win\share
  #
  
  {$(WSHR)}.c.o:
! 	@$(CC) $(CFLAGS) $(SPECOPTS) /Fo$@ $<
  
  {$(WSHR)}.c{$(OBJ)}.o:
! 	@$(CC) $(CFLAGS) $(SPECOPTS) /Fo$@ $<
  
  {$(WSHR)}.h{$(INCL)}.h:
  	@copy $< $@
--- 327,346 ----
  #
  
  {$(UTIL)}.c{$(OBJ)}.o:
! 	@$(CC) $(CFLAGS) $(SPECOPTS) /Fo$@ $<
  
  {$(UTIL)}.c.o:
! 	@$(CC) $(CFLAGS) $(SPECOPTS) /Fo$@ $<
  
  #
  # Rules for files in win\share
  #
  
  {$(WSHR)}.c.o:
! 	@@$(CC) $(CFLAGS) $(SPECOPTS) /Fo$@ $<
  
  {$(WSHR)}.c{$(OBJ)}.o:
! 	@@$(CC) $(CFLAGS) $(SPECOPTS) /Fo$@ $<
  
  {$(WSHR)}.h{$(INCL)}.h:
  	@copy $< $@
***************
*** 343,375 ****
  #
  
  {$(WTTY)}.c{$(OBJ)}.o:
! 	$(CC) $(CFLAGS) $(SPECOPTS) /Fo$@ $<
  
  {$(WTTY)}.c.o:
! 	$(CC) $(CFLAGS) $(SPECOPTS) /Fo$@ $<
  
  
  #
! #  Primary Targets.
  #
  
  #  The default target.
  
! .PHONEY: DO_CL
  
! default: $(GAMEFILE)
  
! all: install.tag
  
! install: install.tag
  
! utility.tag: DO_CL $(INCL)\date.h $(INCL)\trap.h  \
          $(INCL)\onames.h $(INCL)\pm.h monstr.c vis_tab.c \
  	$(U)lev_comp.exe $(U)dgn_comp.exe $(U)recover.exe $(TILEUTIL)
! 	-@if exist utility.tag del utility.tag
! 	@echo utilities made > utility.tag
  
! DO_CL:
  ! 	IF ("$(MACHINE_CODE)"!="")
  	   @SET MC=/G$(MACHINE_CODE)
  !	ELSE
--- 353,457 ----
  #
  
  {$(WTTY)}.c{$(OBJ)}.o:
! 	@$(CC) $(CFLAGS) $(SPECOPTS) /Fo$@ $<
  
  {$(WTTY)}.c.o:
! 	@$(CC) $(CFLAGS) $(SPECOPTS) /Fo$@ $<
! 
! 
! ! IF ("$(USE_DLB)"=="Y")
! DLB = nhdat
! ! ELSE
! DLB =
! ! ENDIF
! 
! ########################################################
! #  
! # TARGETS
  
  
  #
! #  The default make target (so just typing 'nmake' is useful).
  #
+ default : envchk $(GAMEFILE)
  
  #  The default target.
  
! $(GAME): $(O)utility.tag $(GAMEFILE)
! 	@echo $(GAME) is up to date.
  
! #
! #  Everything
! #
! 
! all: install
  
! install: envchk $(GAME) $(O)install.tag
! 	@echo Done.
  
! $(O)install.tag: 	$(DAT)\data	$(DAT)\rumors	 $(DAT)\dungeon \
! 	 	$(DAT)\oracles	$(DAT)\quest.dat $(O)sp_lev.tag $(DLB)
! ! IF ("$(USE_DLB)"=="Y")
! 	copy $(SRC)\nhdat         $(GAMEDIR)
! 	copy $(DAT)\license       $(GAMEDIR)
! ! ELSE
! 	copy $(DAT)\*.            $(GAMEDIR)
! 	copy $(DAT)\*.dat         $(GAMEDIR)
! 	copy $(DAT)\*.lev         $(GAMEDIR)
! 	if exist $(GAMEDIR)\makefile del $(GAMEDIR)\makefile
! ! ENDIF
! 	copy $(SSHR)\termcap	  $(GAMEDIR)
! 	copy *.tib                $(GAMEDIR)
! 	copy $(SSHR)\NetHack.cnf  $(GAMEDIR)\defaults.nh
! 	copy $(MSYS)\NHAccess.nh  $(GAMEDIR)
! 	copy $(U)recover.exe          $(GAMEDIR)
! 	if exist $(DOC)\guideb*.txt copy $(DOC)\guideb*.txt $(GAMEDIR)
! 	if exist $(DOC)\recover.txt copy $(DOC)\recover.txt $(GAMEDIR)
! 	if exist $(DOC)\nethack.txt copy $(DOC)\nethack.txt $(GAMEDIR)
! 	echo install done > $@
  
! $(O)sp_lev.tag: $(O)utility.tag $(SPLEVDES)
! 	cd $(DAT)
! 	$(U)lev_comp bigroom.des
! 	$(U)lev_comp castle.des
! 	$(U)lev_comp endgame.des
! 	$(U)lev_comp gehennom.des
! 	$(U)lev_comp knox.des
! 	$(U)lev_comp mines.des
! 	$(U)lev_comp medusa.des
! 	$(U)lev_comp oracle.des
! 	$(U)lev_comp sokoban.des
! 	$(U)lev_comp tower.des
! 	$(U)lev_comp yendor.des
! 	$(U)lev_comp arch.des
! 	$(U)lev_comp barb.des
! 	$(U)lev_comp caveman.des
! 	$(U)lev_comp healer.des
! 	$(U)lev_comp knight.des
! 	$(U)lev_comp monk.des
! 	$(U)lev_comp priest.des
! 	$(U)lev_comp ranger.des
! 	$(U)lev_comp rogue.des
! 	$(U)lev_comp samurai.des
! 	$(U)lev_comp tourist.des
! 	$(U)lev_comp valkyrie.des
! 	$(U)lev_comp wizard.des
! 	cd $(SRC)
! #	-@if exist $(O)sp_lev.tag del $(O)sp_lev.tag
! 	@echo sp_levs done >$(O)sp_lev.tag
! 	
! $(O)utility.tag: $(INCL)\date.h $(INCL)\trap.h  \
          $(INCL)\onames.h $(INCL)\pm.h monstr.c vis_tab.c \
  	$(U)lev_comp.exe $(U)dgn_comp.exe $(U)recover.exe $(TILEUTIL)
! 	-@if exist $(O)utility.tag del $(O)utility.tag
! 	@echo utilities made > $@
! 
! tileutil: gif2txt.exe txt2ppm.exe
! 	@echo Optional tile development utilities are up to date.
! 
! .PHONEY: envchk
  
! envchk:
  ! 	IF ("$(MACHINE_CODE)"!="")
  	   @SET MC=/G$(MACHINE_CODE)
  !	ELSE
***************
*** 377,411 ****
  !	ENDIF
  !	IF ("$(CL)"=="")
  	   @echo CL Environment variable is defined as follows:
! 	   SET CL=/AL $(MC) /Oo /Gy /Gs /Gt15 /Zp1 /W0 /I..\include /nologo /c
  !	ELSE
  	   @echo Warning CL Environment variable is defined:
  	   @echo CL=$(CL)
  	   @echo Overriding that definition as follows:
! 	   SET CL=/AL $(MC) /Oo /Gy /Gs /Gt16 /Zp1 /W0 /I..\include /nologo /c
  !	ENDIF
  
- tileutil: gif2txt.exe txt2ppm.exe
- 	@echo Optional tile development utilities are up to date.
- 
- install.tag: DO_CL sp_lev.tag nhdat $(GAMEFILE)
- 	copy $(SRC)\nhdat         $(GAMEDIR)
- 	copy $(DAT)\license       $(GAMEDIR)
- 	copy $(SSHR)\termcap	  $(GAMEDIR)
- 	copy *.tib                $(GAMEDIR)
- 	copy $(SSHR)\NetHack.cnf  $(GAMEDIR)\defaults.nh
- 	copy $(MSYS)\NHAccess.nh  $(GAMEDIR)
- 	copy $(U)recover.exe          $(GAMEDIR)
- 	copy $(DOC)\guidebo*.txt   $(GAMEDIR)
- 	if exist $(DOC)\recover.txt copy $(DOC)\recover.txt $(GAMEDIR)
- 	if exist $(DOC)\nethack.txt copy $(DOC)\nethack.txt $(GAMEDIR)
- 	echo install done > install.tag
- 
  #  The main target.
  
! $(GAMEFILE) :  utility.tag $(LNKOPT) $(ALLOBJ)
  	@echo Linking....
! 	$(LINK) $(LFLAGS) /SE:1000 /DYNAMIC:2100 /NOE /ST:6000 @<<$(GAME).lnk
  		$(ALLOBJ:^	=+^
  		)
  		$(GAMEFILE)
--- 459,477 ----
  !	ENDIF
  !	IF ("$(CL)"=="")
  	   @echo CL Environment variable is defined as follows:
! 	   SET CL=/AL $(MC) /Oo /Gy /Gs /Gt14 /Zp1 /W0 /I$(INCL) /I$(MSYS) /I$(WSHR) /nologo /c
  !	ELSE
  	   @echo Warning CL Environment variable is defined:
  	   @echo CL=$(CL)
  	   @echo Overriding that definition as follows:
! 	   SET CL=/AL $(MC) /Oo /Gy /Gs /Gt14 /Zp1 /W0 /I$(INCL) /I$(MSYS) /I$(WSHR) /nologo /c
  !	ENDIF
  
  #  The main target.
  
! $(GAMEFILE) :  $(LNKOPT) $(ALLOBJ)
  	@echo Linking....
! 	$(LINK) $(LFLAGS) /SE:1000 /DYNAMIC:2120 /NOE /ST:6000 @<<$(GAME).lnk
  		$(ALLOBJ:^	=+^
  		)
  		$(GAMEFILE)
***************
*** 989,996 ****
  	del $(U)dlb_main.exe
  
  spotless: clean
! 	if exist utility.tag	   del utility.tag
! 	if exist install.tag	   del install.tag
  	if exist $(GAME).lnk	   del $(GAME).lnk
  	if exist $(U)makedefs.exe  del $(U)makedefs.exe
  	if exist $(U)lev_comp.exe  del $(U)lev_comp.exe
--- 1056,1063 ----
  	del $(U)dlb_main.exe
  
  spotless: clean
! 	if exist $(O)utility.tag	   del $(O)utility.tag
! 	if exist $(O)install.tag   del $(O)install.tag
  	if exist $(GAME).lnk	   del $(GAME).lnk
  	if exist $(U)makedefs.exe  del $(U)makedefs.exe
  	if exist $(U)lev_comp.exe  del $(U)lev_comp.exe
***************
*** 1004,1012 ****
  	if exist $(INCL)\pm.h	   del $(INCL)\pm.h
  	if exist $(INCL)\vis_tab.h del $(INCL)\vis_tab.h
  	if exist $(INCL)\pcvideo.h del $(INCL)\pcvideo.h
! 	if exist $(INCL)\pctiles.h del $(INCL)\pctiles.h
! 	if exist $(INCL)\portio.h  del $(INCL)\portio.h
! 	if exist $(INCL)\tile.h	   del $(INCL)\tile.h
  	if exist monstr.c	   del monstr.c
  	if exist vis_tab.c	   del vis_tab.c
  	if exist $(SRC)\panic.c	   del $(SRC)\panic.c
--- 1071,1079 ----
  	if exist $(INCL)\pm.h	   del $(INCL)\pm.h
  	if exist $(INCL)\vis_tab.h del $(INCL)\vis_tab.h
  	if exist $(INCL)\pcvideo.h del $(INCL)\pcvideo.h
! 	if exist $(MSYS)\pctiles.h del $(MSYS)\pctiles.h
! 	if exist $(INCL)\portio.h  del $(MSYS)\portio.h
! 	if exist $(WSHR)\tile.h	   del $(WSHR)\tile.h
  	if exist monstr.c	   del monstr.c
  	if exist vis_tab.c	   del vis_tab.c
  	if exist $(SRC)\panic.c	   del $(SRC)\panic.c
***************
*** 1057,1063 ****
  	if exist $(DAT)\dlb_main.exe del $(DAT)\dlb_main.exe
  	if exist $(DAT)\lev_comp.exe del $(DAT)\lev_comp.exe
  	if exist $(DAT)\dgn_comp.exe del $(DAT)\dgn_comp.exe
! 	if exist sp_lev.tag        del sp_lev.tag
  	if exist $(PLANAR_TIB)	   del $(PLANAR_TIB)
  	if exist $(OVERVIEW_TIB)   del $(OVERVIEW_TIB)
  
--- 1124,1130 ----
  	if exist $(DAT)\dlb_main.exe del $(DAT)\dlb_main.exe
  	if exist $(DAT)\lev_comp.exe del $(DAT)\lev_comp.exe
  	if exist $(DAT)\dgn_comp.exe del $(DAT)\dgn_comp.exe
! 	if exist $(O)sp_lev.tag        del $(O)sp_lev.tag
  	if exist $(PLANAR_TIB)	   del $(PLANAR_TIB)
  	if exist $(OVERVIEW_TIB)   del $(OVERVIEW_TIB)
  
***************
*** 1065,1070 ****
  #
  #  Secondary Targets.
  #
  #  The following include files depend on makedefs to be created.
  #
  #  date.h should be remade every time any of the source or include
--- 1132,1154 ----
  #
  #  Secondary Targets.
  #
+ #
+ #  Makedefs Stuff
+ #
+ 
+ $(U)makedefs.exe:  $(MAKEOBJS)
+         @echo Linking....
+         @$(LINK) $(LFLAGS) @<<$(@B).lnk
+                 $(MAKEOBJS:^      =+^
+                 )
+                 $@
+                 $(@B)
+                 ;
+ <<
+ 
+ makedefs.o:  $(CONFIG_H)	$(PERMONST_H)	   $(INCL)\objclass.h \
+ 		$(INCL)\monsym.h   $(INCL)\qtext.h $(UTIL)\makedefs.c
+ 
  #  The following include files depend on makedefs to be created.
  #
  #  date.h should be remade every time any of the source or include
***************
*** 1090,1118 ****
  	-$(U)makedefs -z
  
  #
- #  Makedefs Stuff
- #
- 
- $(U)makedefs.exe:  $(MAKEOBJS)
-         @echo Linking....
-         $(LINK) $(LFLAGS) @<<$(@B).lnk
-                 $(MAKEOBJS:^      =+^
-                 )
-                 $@
-                 $(@B)
-                 ;
- <<
- 
- makedefs.o:  $(CONFIG_H)	$(PERMONST_H)	   $(INCL)\objclass.h \
- 		$(INCL)\monsym.h   $(INCL)\qtext.h $(UTIL)\makedefs.c
- 
- #
  # Level Compiler Stuff
  #
  
  $(U)lev_comp.exe:  $(SPLEVOBJS)
  	@echo Linking $@...
! 	$(LINK) $(LFLAGS) @<<$(@B).lnk
  		$(SPLEVOBJS:^	=+^
  		)
  		$@
--- 1174,1185 ----
  	-$(U)makedefs -z
  
  #
  # Level Compiler Stuff
  #
  
  $(U)lev_comp.exe:  $(SPLEVOBJS)
  	@echo Linking $@...
! 	@$(LINK) $(LFLAGS) @<<$(@B).lnk
  		$(SPLEVOBJS:^	=+^
  		)
  		$@
***************
*** 1172,1178 ****
  
  $(U)dgn_comp.exe: $(DGNCOMPOBJS)
      @echo Linking $@...
! 	$(LINK) $(LFLAGS) @<<$(@B).lnk
  		$(DGNCOMPOBJS:^	=+^
  		)
  		$@
--- 1239,1245 ----
  
  $(U)dgn_comp.exe: $(DGNCOMPOBJS)
      @echo Linking $@...
! 	@$(LINK) $(LFLAGS) @<<$(@B).lnk
  		$(DGNCOMPOBJS:^	=+^
  		)
  		$@
***************
*** 1233,1239 ****
  
  $(U)recover.exe:   $(RECOVOBJS)
          @echo Linking....
!         $(LINK) $(LFLAGS) @<<$(@B).lnk
                  $(RECOVOBJS:^      =+^
                  )
                  $@
--- 1300,1306 ----
  
  $(U)recover.exe:   $(RECOVOBJS)
          @echo Linking....
!         @$(LINK) $(LFLAGS) @<<$(@B).lnk
                  $(RECOVOBJS:^      =+^
                  )
                  $@
***************
*** 645,651 ****
  
  tilemap.exe: tilemap.o
          @echo Linking....
!         $(LINK) $(LFLAGS) @<<$(@B).lnk
  		tilemap.o
                  $@
                  $(@B)
--- 712,718 ----
  
  tilemap.exe: tilemap.o
          @echo Linking....
!         @$(LINK) $(LFLAGS) @<<$(@B).lnk
  		tilemap.o
                  $@
                  $(@B)
***************
*** 673,747 ****
  	@til2bin2
  
  tile2bin.exe: tile2bin.o $(TEXTIO)
! 	$(LINK) $(LFLAGS) tile2bin.o $(TEXTIO),$@,$(@B);
  
  til2bin2.exe: til2bin2.o $(TEXTIO2)
! 	$(LINK) $(LFLAGS) til2bin2.o $(TEXTIO2),$@,$(@B);
  
  thintile.exe: thintile.o 
! 	$(LINK) $(LFLAGS) thintile.o,$@,$(@B);
  
! thintile.o:  $(HACK_H) $(INCL)\tile.h $(WSHR)\thintile.c
  
  thintile.tag: thintile.exe $(TILEFILES)
  	thintile
  	@echo thintiles created >thintile.tag
  
! tile2bin.o:  $(HACK_H) $(INCL)\tile.h $(INCL)\pctiles.h $(INCL)\pcvideo.h \
  	$(MSYS)\tile2bin.c
  
! til2bin2.o:  $(HACK_H) $(INCL)\tile.h $(INCL)\pctiles.h $(INCL)\pcvideo.h \
  	$(MSYS)\tile2bin.c
! 	-$(CC) $(CFLAGS) $(SPECOPTS) -DTILE_X=8 -DOVERVIEW_FILE /Zg $(MSYS)\tile2bin.c >$(@B).pro
! 	$(CC) $(CFLAGS) $(SPECOPTS) -DTILE_X=8 -DOVERVIEW_FILE /Fo$@ $(MSYS)\tile2bin.c
  
! tiletext.o:  $(CONFIG_H) $(INCL)\tile.h $(WSHR)\tiletext.c
  
! tiletex2.o:  $(CONFIG_H) $(INCL)\tile.h $(WSHR)\tiletext.c
! 	-$(CC) $(CFLAGS) $(SPECOPTS) -DTILE_X=8 /Zg $(WSHR)\tiletext.c >$(@B).pro
! 	$(CC) $(CFLAGS) $(SPECOPTS) -DTILE_X=8 /Fo$@ $(WSHR)\tiletext.c
! 
! tiletxt.o: $(CONFIG_H)	$(INCL)\tile.h tilemap.c
! 	-$(CC) $(CFLAGS) $(SPECOPTS) -DTILETEXT /Zg tilemap.c >$(@B).pro
! 	$(CC) $(CFLAGS) $(SPECOPTS) -DTILETEXT /Fo$@ tilemap.c
    
! tiletxt2.o: $(CONFIG_H)	$(INCL)\tile.h tilemap.c
! 	-$(CC) $(CFLAGS) $(SPECOPTS) -DTILETEXT /Zg tilemap.c >$(@B).pro
! 	$(CC) $(CFLAGS) $(SPECOPTS) -DTILETEXT -DTILE_X=8 /Fo$@ tilemap.c
  #
  # Optional GIF Utilities (for development)
  #
  
  gif2txt.exe: $(GIFREADERS) $(TEXTIO)
! 	$(LINK) $(LFLAGS) $(GIFREADERS) $(TEXTIO),$@,$(@B);
  
  gif2txt2.exe: $(GIFREAD2) $(TEXTIO2)
! 	$(LINK) $(LFLAGS) $(GIFREAD2) $(TEXTIO2),$@,$(@B);
  
  txt2ppm.exe: $(PPMWRITERS) $(TEXTIO)
! 	$(LINK) $(LFLAGS) $(PPMWRITERS) $(TEXTIO),$@,$(@B);
  
  txt2ppm2.exe: $(PPMWRIT2) $(TEXTIO2)
! 	$(LINK) $(LFLAGS) $(PPMWRIT2) $(TEXTIO2),$@,$(@B);
  
! gifread.o: $(CONFIG_H) $(INCL)\tile.h
  
! gifread2.o: $(CONFIG_H) $(INCL)\tile.h $(WSHR)\gifread.c
! 	-$(CC) $(CFLAGS) $(SPECOPTS) -DTILE_X=8 /Zg gifread.c >$(@B).pro
! 	$(CC) $(CFLAGS) $(SPECOPTS) -DTILE_X=8 $(WSHR)\gifread.c
  
! ppmwrite.o: $(CONFIG_H)	$(INCL)\tile.h $(WSHR)\ppmwrite.c
  
! ppmwrit2.o:  $(CONFIG_H) $(INCL)\tile.h $(WSHR)\ppmwrite.c
! 	-$(CC) $(CFLAGS) $(SPECOPTS) -DTILE_X=8 /Zg ppmwrite.c >$(@B).pro
! 	$(CC) $(CFLAGS) $(SPECOPTS) -DTILE_X=8 $(WSHR)\ppmwrite.c
  
  #
  #  Optional tile viewer (development sources only)
  #
  
  viewtib.exe: viewtib.o
! 	$(LINK) $(LFLAGS) -oviewtib.exe viewtib.o $(LIBRARIES)
  
  viewtib.o: $(MSYS)\viewtib.c
  
--- 740,814 ----
  	@til2bin2
  
  tile2bin.exe: tile2bin.o $(TEXTIO)
! 	@$(LINK) $(LFLAGS) tile2bin.o $(TEXTIO),$@,$(@B);
  
  til2bin2.exe: til2bin2.o $(TEXTIO2)
! 	@$(LINK) $(LFLAGS) til2bin2.o $(TEXTIO2),$@,$(@B);
  
  thintile.exe: thintile.o 
! 	@$(LINK) $(LFLAGS) thintile.o,$@,$(@B);
  
! thintile.o:  $(HACK_H) $(WSHR)\tile.h $(WSHR)\thintile.c
  
  thintile.tag: thintile.exe $(TILEFILES)
  	thintile
  	@echo thintiles created >thintile.tag
  
! tile2bin.o:  $(HACK_H) $(WSHR)\tile.h $(MSYS)\pctiles.h $(MSYS)\pcvideo.h \
  	$(MSYS)\tile2bin.c
  
! til2bin2.o:  $(HACK_H) $(WSHR)\tile.h $(MSYS)\pctiles.h $(MSYS)\pcvideo.h \
  	$(MSYS)\tile2bin.c
! 	-@$(CC) $(CFLAGS) $(SPECOPTS) -DTILE_X=8 -DOVERVIEW_FILE /Zg $(MSYS)\tile2bin.c >$(@B).pro
! 	@$(CC) $(CFLAGS) $(SPECOPTS) -DTILE_X=8 -DOVERVIEW_FILE /Fo$@ $(MSYS)\tile2bin.c
  
! tiletext.o:  $(CONFIG_H) $(WSHR)\tile.h $(WSHR)\tiletext.c
  
! tiletex2.o:  $(CONFIG_H) $(WSHR)\tile.h $(WSHR)\tiletext.c
! 	-@$(CC) $(CFLAGS) $(SPECOPTS) -DTILE_X=8 /Zg $(WSHR)\tiletext.c >$(@B).pro
! 	@$(CC) $(CFLAGS) $(SPECOPTS) -DTILE_X=8 /Fo$@ $(WSHR)\tiletext.c
! 
! tiletxt.o: $(CONFIG_H)	$(WSHR)\tile.h tilemap.c
! 	-@$(CC) $(CFLAGS) $(SPECOPTS) -DTILETEXT /Zg tilemap.c >$(@B).pro
! 	@$(CC) $(CFLAGS) $(SPECOPTS) -DTILETEXT /Fo$@ tilemap.c
    
! tiletxt2.o: $(CONFIG_H)	$(WSHR)\tile.h tilemap.c
! 	-@$(CC) $(CFLAGS) $(SPECOPTS) -DTILETEXT /Zg tilemap.c >$(@B).pro
! 	@$(CC) $(CFLAGS) $(SPECOPTS) -DTILETEXT -DTILE_X=8 /Fo$@ tilemap.c
  #
  # Optional GIF Utilities (for development)
  #
  
  gif2txt.exe: $(GIFREADERS) $(TEXTIO)
! 	@$(LINK) $(LFLAGS) $(GIFREADERS) $(TEXTIO),$@,$(@B);
  
  gif2txt2.exe: $(GIFREAD2) $(TEXTIO2)
! 	@$(LINK) $(LFLAGS) $(GIFREAD2) $(TEXTIO2),$@,$(@B);
  
  txt2ppm.exe: $(PPMWRITERS) $(TEXTIO)
! 	@$(LINK) $(LFLAGS) $(PPMWRITERS) $(TEXTIO),$@,$(@B);
  
  txt2ppm2.exe: $(PPMWRIT2) $(TEXTIO2)
! 	@$(LINK) $(LFLAGS) $(PPMWRIT2) $(TEXTIO2),$@,$(@B);
  
! gifread.o: $(CONFIG_H) $(WSHR)\tile.h
  
! gifread2.o: $(CONFIG_H) $(WSHR)\tile.h $(WSHR)\gifread.c
! 	-@$(CC) $(CFLAGS) $(SPECOPTS) -DTILE_X=8 /Zg gifread.c >$(@B).pro
! 	@$(CC) $(CFLAGS) $(SPECOPTS) -DTILE_X=8 $(WSHR)\gifread.c
  
! ppmwrite.o: $(CONFIG_H)	$(WSHR)\tile.h $(WSHR)\ppmwrite.c
  
! ppmwrit2.o:  $(CONFIG_H) $(WSHR)\tile.h $(WSHR)\ppmwrite.c
! 	-@$(CC) $(CFLAGS) $(SPECOPTS) -DTILE_X=8 /Zg ppmwrite.c >$(@B).pro
! 	@$(CC) $(CFLAGS) $(SPECOPTS) -DTILE_X=8 $(WSHR)\ppmwrite.c
  
  #
  #  Optional tile viewer (development sources only)
  #
  
  viewtib.exe: viewtib.o
! 	@$(LINK) $(LFLAGS) -oviewtib.exe viewtib.o $(LIBRARIES)
  
  viewtib.o: $(MSYS)\viewtib.c
  
***************
*** 750,756 ****
  #
  
  alloc.o: $(CONFIG_H)	 alloc.c
! drawing.o: $(CONFIG_H) drawing.c $(INCL)\pcvideo.h
  decl.o: $(CONFIG_H) decl.c
  monst.o: $(CONFIG_H)	     $(PERMONST_H)	$(ESHK_H)	   \
  	$(EPRI_H)	      $(VAULT_H)	 $(INCL)\monsym.h   \
--- 817,823 ----
  #
  
  alloc.o: $(CONFIG_H)	 alloc.c
! drawing.o: $(CONFIG_H) drawing.c $(MSYS)\pcvideo.h
  decl.o: $(CONFIG_H) decl.c
  monst.o: $(CONFIG_H)	     $(PERMONST_H)	$(ESHK_H)	   \
  	$(EPRI_H)	      $(VAULT_H)	 $(INCL)\monsym.h   \
***************
*** 769,817 ****
  
  DATABASE = $(DAT)\data.bas
  
! $(DAT)\data:	 utility.tag	$(DATABASE)
  	$(U)makedefs -d
  
! $(DAT)\rumors:	     utility.tag    $(DAT)\rumors.tru	$(DAT)\rumors.fal
  	$(U)makedefs -r
  
! $(DAT)\quest.dat: utility.tag  $(DAT)\quest.txt
  	$(U)makedefs -q
  
! $(DAT)\oracles:	     utility.tag    $(DAT)\oracles.txt
  	$(U)makedefs -h
  
! sp_lev.tag: utility.tag $(SPLEVDES)
! 	cd $(DAT)
! 	$(U)lev_comp bigroom.des
! 	$(U)lev_comp castle.des
! 	$(U)lev_comp endgame.des
! 	$(U)lev_comp gehennom.des
! 	$(U)lev_comp knox.des
! 	$(U)lev_comp mines.des
! 	$(U)lev_comp medusa.des
! 	$(U)lev_comp oracle.des
! 	$(U)lev_comp sokoban.des
! 	$(U)lev_comp tower.des
! 	$(U)lev_comp yendor.des
! 	$(U)lev_comp arch.des
! 	$(U)lev_comp barb.des
! 	$(U)lev_comp caveman.des
! 	$(U)lev_comp healer.des
! 	$(U)lev_comp knight.des
! 	$(U)lev_comp monk.des
! 	$(U)lev_comp priest.des
! 	$(U)lev_comp ranger.des
! 	$(U)lev_comp rogue.des
! 	$(U)lev_comp samurai.des
! 	$(U)lev_comp tourist.des
! 	$(U)lev_comp valkyrie.des
! 	$(U)lev_comp wizard.des
! 	cd $(SRC)
! 	-@if exist sp_lev.tag del sp_lev.tag
! 	@echo sp_levs done >sp_lev.tag
! 	
! $(DAT)\dungeon: utility.tag  $(DAT)\dungeon.def
  	$(U)makedefs -e
  	cd $(DAT)
  	$(U)dgn_comp dungeon.pdf
--- 836,854 ----
  
  DATABASE = $(DAT)\data.bas
  
! $(DAT)\data:	 $(O)utility.tag	$(DATABASE)
  	$(U)makedefs -d
  
! $(DAT)\rumors:	     $(O)utility.tag    $(DAT)\rumors.tru	$(DAT)\rumors.fal
  	$(U)makedefs -r
  
! $(DAT)\quest.dat: $(O)utility.tag  $(DAT)\quest.txt
  	$(U)makedefs -q
  
! $(DAT)\oracles:	     $(O)utility.tag    $(DAT)\oracles.txt
  	$(U)makedefs -h
  
! $(DAT)\dungeon: $(O)utility.tag  $(DAT)\dungeon.def
  	$(U)makedefs -e
  	cd $(DAT)
  	$(U)dgn_comp dungeon.pdf
***************
*** 820,830 ****
  #
  # DLB stuff
  #
- #note that dir below assumes bin/dir.exe from djgpp distribution
  #
! nhdat:	$(DAT)\data $(DAT)\oracles $(DAT)\options \
! 	$(DAT)\quest.dat $(DAT)\rumors $(DAT)\dungeon \
! 	$(U)dlb_main.exe
  	@copy $(MSYS)\msdoshlp.txt $(DAT)
  	@cd $(DAT)
  	@echo data >dlb.lst
--- 857,867 ----
  #
  # DLB stuff
  #
  #
! nhdat:	$(U)dlb_main.exe $(DAT)\data $(DAT)\oracles $(DAT)\options \
! 	$(DAT)\quest.dat $(DAT)\rumors $(DAT)\help $(DAT)\hh $(DAT)\cmdhelp \
! 	$(DAT)\history $(DAT)\opthelp $(DAT)\wizhelp $(DAT)\dungeon \
! 	$(DAT)\license $(O)sp_lev.tag
  	@copy $(MSYS)\msdoshlp.txt $(DAT)
  	@cd $(DAT)
  	@echo data >dlb.lst
***************
*** 849,1008 ****
  	link $(LFLAGS) /ST:5120 $(DLBOBJS),$@,$(@B);
  
  dlb_main.o: $(U)dlb_main.c $(INCL)\config.h $(DLB_H)
! 	$(CC) $(CFLAGS) $(SPECOPTS) /Fo$@ $(U)dlb_main.c
  # Game Dependencies
  # sys/share
! main.o:	 $(HACK_H) $(DLB_H) $(SSHR)\pcmain.c
! 	$(CC) $(CFLAGS) $(SPECOPTS) /Fo$@ $(SSHR)\pcmain.c
! tty.o:	 $(HACK_H) $(INCL)\wintty.h $(SSHR)\pctty.c
! 	$(CC) $(CFLAGS) $(SPECOPTS) /Fo$@ $(SSHR)\pctty.c
! unix.o:	 $(HACK_H) $(SSHR)\pcunix.c
! 	$(CC) $(CFLAGS) $(SPECOPTS) /Fo$@ $(SSHR)\pcunix.c
! sys.o : $(HACK_H) $(SSHR)\pcsys.c
! 	$(CC) $(CFLAGS) $(SPECOPTS) /Fo$@ $(SSHR)\pcsys.c
! random.o : $(HACK_H) $(SSHR)\random.c
! 	$(CC) $(CFLAGS) $(SPECOPTS) /Fo$@ $(SSHR)\$(@B).c
  
  # sys/msdos
  msdos.o : $(HACK_H)  $(MSYS)\msdos.c
! 	$(CC) $(CFLAGS) $(SPECOPTS) /Fo$@ $(MSYS)\$(@B).c
  pckeys.o : $(HACK_H)  $(MSYS)\pckeys.c
! 	$(CC) $(CFLAGS) $(SPECOPTS) /Fo$@ $(MSYS)\$(@B).c
! pctiles.o : $(HACK_H)  $(MSYS)\pctiles.c $(INCL)\portio.h
! 	$(CC) $(CFLAGS) $(SPECOPTS) /Fo$@ $(MSYS)\$(@B).c
! sound.o : $(HACK_H)  $(MSYS)\sound.c $(INCL)\portio.h
! 	$(CC) $(CFLAGS) $(SPECOPTS) /Fo$@ $(MSYS)\$(@B).c
! video.o : $(HACK_H)  $(INCL)\pcvideo.h $(INCL)\portio.h $(MSYS)\video.c
! 	$(CC) $(CFLAGS) $(SPECOPTS) /Fo$@ $(MSYS)\$(@B).c
! vidvga.o : $(HACK_H)  $(INCL)\pcvideo.h $(INCL)\portio.h $(TILE_H) \
  	$(MSYS)\vidvga.c
! 	$(CC) $(CFLAGS) $(SPECOPTS) /Fo$@ $(MSYS)\$(@B).c
! vidtxt.o : $(HACK_H)  $(INCL)\pcvideo.h $(INCL)\portio.h $(TILE_H) \
  	$(MSYS)\vidtxt.c
! 	$(CC) $(CFLAGS) $(SPECOPTS) /Fo$@ $(MSYS)\$(@B).c
  stubvid.o : $(HACK_H) $(MSYS)\video.c
! 	$(CC) $(CFLAGS) $(SPECOPTS) -DSTUBVIDEO /Fo$@ $(MSYS)\video.c
  
  # win/tty
! getline.o : $(HACK_H) $(INCL)\wintty.h $(WIN)\getline.c
! 	$(CC) $(CFLAGS) $(SPECOPTS) /Fo$@ $(WIN)\$(@B).c
! termcap.o : $(CONFIG_H) $(WIN)\termcap.c
! 	$(CC) $(CFLAGS) $(SPECOPTS) /Fo$@ $(WIN)\$(@B).c
! topl.o : $(CONFIG_H) $(WIN)\topl.c
! 	$(CC) $(CFLAGS) $(SPECOPTS) /Fo$@ $(WIN)\$(@B).c
! wintty.o : $(CONFIG_H) $(WIN)\wintty.c
! 	$(CC) $(CFLAGS) $(SPECOPTS) /Fo$@ $(WIN)\$(@B).c
  
  # src dependencies
! allmain.o:  $(HACK_H)
! alloc.o:    $(CONFIG_H)
! apply.o:    $(HACK_H) $(INCL)\edog.h
! artifact.o: $(HACK_H) $(INCL)\artifact.h $(INCL)\artilist.h
! attrib.o:   $(HACK_H) $(INCL)\artifact.h
! ball.o:	    $(HACK_H)
! bones.o:    $(HACK_H) $(INCL)\lev.h
! botl.o:	    $(HACK_H)
! cmd.o:	    $(HACK_H) $(INCL)\func_tab.h
! dbridge.o:  $(HACK_H)
! decl.o:	    $(HACK_H) $(INCL)\quest.h
! detect.o:   $(HACK_H) $(INCL)\artifact.h
! dig.o:      $(HACK_H)
! display.o:  $(HACK_H)
! dlb.o:      $(HACK_H) $(DLB_H)
! do.o:	    $(HACK_H) $(INCL)\lev.h
! do_name.o:  $(HACK_H)
! do_wear.o:  $(HACK_H)
! dog.o:	    $(HACK_H) $(INCL)\edog.h
! dogmove.o:  $(HACK_H) $(INCL)\mfndpos.h $(INCL)\edog.h
! dokick.o:   $(HACK_H) $(ESHK_H)
! dothrow.o:  $(HACK_H)
! drawing.o:  $(HACK_H) $(INCL)\tcap.h
! dungeon.o:  $(HACK_H) $(INCL)\dgn_file.h
! eat.o:	    $(HACK_H)
! end.o:	    $(HACK_H) $(ESHK_H)
! engrave.o:  $(HACK_H) $(INCL)\lev.h
! exper.o:    $(HACK_H)
! explode.o:  $(HACK_H)
! extralev.o:  $(HACK_H)
! files.o:     $(HACK_H)
! fountain.o:  $(HACK_H)
! hack.o:	     $(HACK_H)
! hacklib.o:   $(HACK_H)
! invent.o:    $(HACK_H) $(INCL)\artifact.h
! light.o:     $(HACK_H) $(INCL)\lev.h
! lock.o:	     $(HACK_H)
! mail.o:	     $(HACK_H) $(INCL)\mail.h
! makemon.o:   $(HACK_H) $(EPRI_H) $(EMIN_H)
! mcastu.o:    $(HACK_H)
! mhitm.o:     $(HACK_H) $(INCL)\artifact.h $(INCL)\edog.h
! mhitu.o:     $(HACK_H) $(INCL)\artifact.h $(INCL)\edog.h
! minion.o:    $(HACK_H) $(EMIN_H) $(EPRI_H)
! mklev.o:     $(HACK_H)
! mkmap.o:     $(HACK_H) $(INCL)\sp_lev.h
! mkmaze.o:    $(HACK_H) $(INCL)\sp_lev.h
! mkobj.o:     $(HACK_H) $(INCL)\artifact.h $(INCL)\prop.h
! mkroom.o:    $(HACK_H)
! mon.o:	     $(HACK_H) $(INCL)\mfndpos.h $(INCL)\edog.h
! mondata.o:   $(HACK_H) $(ESHK_H) $(EPRI_H)
! monmove.o:   $(HACK_H) $(INCL)\mfndpos.h $(INCL)\artifact.h
! monst.o:     $(CONFIG_H) $(PERM_H) $(ESHK_H) $(EPRI_H) \
! 	  $(INCL)\color.h $(INCL)\monsym.h $(INCL)\vault.h
! mplayer.o:   $(HACK_H)
! mthrowu.o:   $(HACK_H)
! muse.o:	     $(HACK_H)
! music.o:     $(HACK_H)
! o_init.o:    $(HACK_H)
! objects.o:   $(CONFIG_H) $(INCL)\obj.h $(INCL)\objclass.h \
! 	       $(INCL)\prop.h $(INCL)\color.h
! objnam.o:    $(HACK_H)
! options.o:   $(CONFIG_H) $(HACK_H) $(INCL)\objclass.h $(INCL)\flag.h \
! 	      $(INCL)\tcap.h
! pager.o:     $(HACK_H)
! 	$(CC) $(CFLAGS) $(SPECOPTS) /f- /Od /Fo$@ $(@B).c
! pickup.o:    $(HACK_H)
! pline.o:     $(HACK_H) $(EPRI_H)
! polyself.o:  $(HACK_H)
! potion.o:    $(HACK_H)
! pray.o:	     $(HACK_H) $(EPRI_H)
! priest.o:    $(HACK_H) $(INCL)\mfndpos.h $(ESHK_H) $(EPRI_H) $(EMIN_H)
! quest.o:     $(HACK_H) $(INCL)\quest.h $(INCL)\qtext.h
! questpgr.o:  $(HACK_H) $(INCL)\qtext.h
! read.o:	     $(HACK_H)
! rect.o:	     $(HACK_H)
! region.o:    $(HACK_H)
! restore.o:   $(HACK_H) $(INCL)\lev.h $(INCL)\tcap.h $(INCL)\quest.h
! rip.o:	     $(HACK_H)
! rnd.o:	     $(HACK_H)
! role.o:	     $(HACK_H)
! rumors.o:    $(HACK_H)
! save.o:	     $(HACK_H) $(INCL)\lev.h $(INCL)\quest.h
! shk.o:	     $(HACK_H) $(ESHK_H)
! shknam.o:    $(HACK_H) $(ESHK_H)
! sit.o:	     $(HACK_H) $(INCL)\artifact.h
! sounds.o:    $(HACK_H) $(INCL)\edog.h
! sp_lev.o:    $(HACK_H) $(INCL)\sp_lev.h $(INCL)\align.h $(INCL)\rect.h
! spell.o:     $(HACK_H)
! steal.o:     $(HACK_H)
! steed.o:     $(HACK_H)
! teleport.o:  $(HACK_H)
! tile.o:	     $(HACK_H) $(TILE_H)
! timeout.o:   $(HACK_H)
! topten.o:    $(HACK_H)
! track.o:     $(HACK_H)
! trap.o:	     $(HACK_H)
! u_init.o:    $(HACK_H)
! uhitm.o:     $(HACK_H)
! vault.o:     $(HACK_H) $(INCL)\vault.h
! version.o:   $(HACK_H) $(INCL)\patchlev.h
! vision.o:    $(HACK_H) $(INCL)\vis_tab.h
! weapon.o:    $(HACK_H)
! were.o:	     $(HACK_H)
! wield.o:     $(HACK_H)
! windows.o:   $(HACK_H) $(INCL)\wintty.h
! wizard.o:    $(HACK_H) $(INCL)\qtext.h
! worm.o:	     $(HACK_H) $(INCL)\lev.h
! worn.o:	     $(HACK_H)
! write.o:     $(HACK_H)
! zap.o:	     $(HACK_H)
  
  # end of file
--- 886,1052 ----
  	link $(LFLAGS) /ST:5120 $(DLBOBJS),$@,$(@B);
  
  dlb_main.o: $(U)dlb_main.c $(INCL)\config.h $(DLB_H)
! 	@$(CC) $(CFLAGS) $(SPECOPTS) /Fo$@ $(U)dlb_main.c
! 
  # Game Dependencies
+ 
  # sys/share
! main.o: $(SSHR)\pcmain.c $(HACK_H) $(INCL)\dlb.h \
! 		#$(INCL)\win32api.h
! 	@$(CC) $(CFLAGS) $(SPECOPTS) /Fo$@ $(SSHR)\pcmain.c
! sys.o: $(SSHR)\pcsys.c $(HACK_H)
! 	@$(CC) $(CFLAGS) $(SPECOPTS) /Fo$@ $(SSHR)\pcsys.c
! tty.o: $(SSHR)\pctty.c $(HACK_H)
! 	@$(CC) $(CFLAGS) $(SPECOPTS) /Fo$@ $(SSHR)\pctty.c
! unix.o: $(SSHR)\pcunix.c $(HACK_H)
! 	@$(CC) $(CFLAGS) $(SPECOPTS) /Fo$@ $(SSHR)\pcunix.c
! random.o: $(SSHR)\random.c $(HACK_H)
! 	@$(CC) $(CFLAGS) $(SPECOPTS) /Fo$@ $(SSHR)\random.c
  
  # sys/msdos
  msdos.o : $(HACK_H)  $(MSYS)\msdos.c
! 	@$(CC) $(CFLAGS) $(SPECOPTS) $(NEWALT) /Fo$@ $(MSYS)\msdos.c
  pckeys.o : $(HACK_H)  $(MSYS)\pckeys.c
! 	@$(CC) $(CFLAGS) $(SPECOPTS) /Fo$@ $(MSYS)\pckeys.c
! pctiles.o : $(HACK_H)  $(MSYS)\pctiles.c $(MSYS)\portio.h
! 	@$(CC) $(CFLAGS) $(SPECOPTS) /Fo$@ $(MSYS)\pctiles.c
! sound.o : $(HACK_H)  $(MSYS)\sound.c $(MSYS)\portio.h
! 	@$(CC) $(CFLAGS) $(SPECOPTS) /Fo$@ $(MSYS)\sound.c
! video.o : $(HACK_H)  $(MSYS)\pcvideo.h $(MSYS)\portio.h $(MSYS)\video.c
! 	@$(CC) $(CFLAGS) $(SPECOPTS) /Fo$@ $(MSYS)\video.c
! vidvga.o : $(HACK_H)  $(MSYS)\pcvideo.h $(MSYS)\portio.h $(TILE_H) \
  	$(MSYS)\vidvga.c
! 	@$(CC) $(CFLAGS) $(SPECOPTS) /Fo$@ $(MSYS)\vidvga.c
! vidtxt.o : $(HACK_H)  $(MSYS)\pcvideo.h $(MSYS)\portio.h $(TILE_H) \
  	$(MSYS)\vidtxt.c
! 	@$(CC) $(CFLAGS) $(SPECOPTS) /Fo$@ $(MSYS)\vidtxt.c
  stubvid.o : $(HACK_H) $(MSYS)\video.c
! 	@$(CC) $(CFLAGS) $(SPECOPTS) -DSTUBVIDEO /Fo$@ $(MSYS)\video.c
  
  # win/tty
! getline.o: $(WIN)\getline.c $(HACK_H) $(INCL)\func_tab.h
! 	@$(CC) $(CFLAGS) $(SPECOPTS) /Fo$@ $(WIN)\getline.c
! termcap.o: $(WIN)\termcap.c $(HACK_H) $(INCL)\tcap.h
! 	@$(CC) $(CFLAGS) $(SPECOPTS) /Fo$@ $(WIN)\termcap.c
! topl.o: $(WIN)\topl.c $(HACK_H) $(INCL)\tcap.h
! 	@$(CC) $(CFLAGS) $(SPECOPTS) /Fo$@ $(WIN)\topl.c
! wintty.o: $(WIN)\wintty.c $(HACK_H) $(INCL)\dlb.h \
! 		$(INCL)\patchlev.h $(INCL)\tcap.h
! 	@$(CC) $(CFLAGS) $(SPECOPTS) /Fo$@ $(WIN)\wintty.c
  
  # src dependencies
! allmain.o: allmain.c $(HACK_H)
! alloc.o: alloc.c $(CONFIG_H)
! apply.o: apply.c $(HACK_H) $(INCL)\edog.h
! artifact.o: artifact.c $(HACK_H) $(INCL)\artifact.h $(INCL)\artilist.h
! attrib.o: attrib.c $(HACK_H) $(INCL)\artifact.h
! ball.o: ball.c $(HACK_H)
! bones.o: bones.c $(HACK_H) $(INCL)\lev.h
! botl.o: botl.c $(HACK_H)
! cmd.o: cmd.c $(HACK_H) $(INCL)\func_tab.h
! dbridge.o: dbridge.c $(HACK_H)
! decl.o: decl.c $(HACK_H)
! detect.o: detect.c $(HACK_H) $(INCL)\artifact.h
! dig.o: dig.c $(HACK_H) $(INCL)\edog.h
! display.o: display.c $(HACK_H)
! dlb.o: dlb.c $(CONFIG_H) $(INCL)\dlb.h
! do.o: do.c $(HACK_H) $(INCL)\lev.h
! do_name.o: do_name.c $(HACK_H)
! do_wear.o: do_wear.c $(HACK_H)
! dog.o: dog.c $(HACK_H) $(INCL)\edog.h
! dogmove.o: dogmove.c $(HACK_H) $(INCL)\mfndpos.h $(INCL)\edog.h
! dokick.o: dokick.c $(HACK_H) $(INCL)\eshk.h
! dothrow.o: dothrow.c $(HACK_H)
! drawing.o: drawing.c $(HACK_H) $(INCL)\tcap.h
! dungeon.o: dungeon.c $(HACK_H) $(INCL)\dgn_file.h $(INCL)\dlb.h
! eat.o: eat.c $(HACK_H)
! end.o: end.c $(HACK_H) $(INCL)\eshk.h $(INCL)\dlb.h
! engrave.o: engrave.c $(HACK_H) $(INCL)\lev.h
! exper.o: exper.c $(HACK_H)
! explode.o: explode.c $(HACK_H)
! extralev.o: extralev.c $(HACK_H)
! files.o: files.c $(HACK_H) $(INCL)\dlb.h
! fountain.o: fountain.c $(HACK_H)
! hack.o: hack.c $(HACK_H)
! hacklib.o: hacklib.c $(HACK_H)
! invent.o: invent.c $(HACK_H) $(INCL)\artifact.h
! light.o: light.c $(HACK_H) $(INCL)\lev.h
! lock.o: lock.c $(HACK_H)
! mail.o: mail.c $(HACK_H) $(INCL)\mail.h
! makemon.o: makemon.c $(HACK_H) $(INCL)\epri.h $(INCL)\emin.h \
! 		$(INCL)\edog.h
! mcastu.o: mcastu.c $(HACK_H)
! mhitm.o: mhitm.c $(HACK_H) $(INCL)\artifact.h $(INCL)\edog.h
! mhitu.o: mhitu.c $(HACK_H) $(INCL)\artifact.h $(INCL)\edog.h
! minion.o: minion.c $(HACK_H) $(INCL)\emin.h $(INCL)\epri.h
! mklev.o: mklev.c $(HACK_H)
! mkmap.o: mkmap.c $(HACK_H) $(INCL)\sp_lev.h
! mkmaze.o: mkmaze.c $(HACK_H) $(INCL)\sp_lev.h $(INCL)\lev.h
! mkobj.o: mkobj.c $(HACK_H) $(INCL)\artifact.h
! mkroom.o: mkroom.c $(HACK_H)
! mon.o: mon.c $(HACK_H) $(INCL)\mfndpos.h $(INCL)\edog.h
! mondata.o: mondata.c $(HACK_H) $(INCL)\eshk.h $(INCL)\epri.h
! monmove.o: monmove.c $(HACK_H) $(INCL)\mfndpos.h $(INCL)\artifact.h
! monst.o: monst.c $(CONFIG_H) $(INCL)\permonst.h $(INCL)\align.h \
! 		$(INCL)\monattk.h $(INCL)\monflag.h $(INCL)\monsym.h \
! 		$(INCL)\dungeon.h $(INCL)\eshk.h $(INCL)\vault.h \
! 		$(INCL)\epri.h $(INCL)\color.h
! mplayer.o: mplayer.c $(HACK_H)
! mthrowu.o: mthrowu.c $(HACK_H)
! muse.o: muse.c $(HACK_H) $(INCL)\edog.h
! music.o: music.c $(HACK_H) #interp.c
! o_init.o: o_init.c $(HACK_H) $(INCL)\lev.h
! objects.o: objects.c $(CONFIG_H) $(INCL)\obj.h $(INCL)\objclass.h \
! 		$(INCL)\prop.h $(INCL)\skills.h $(INCL)\color.h
! objnam.o: objnam.c $(HACK_H)
! options.o: options.c $(CONFIG_H) $(INCL)\objclass.h $(INCL)\flag.h \
! 		$(HACK_H) $(INCL)\tcap.h
! pager.o: pager.c $(HACK_H) $(INCL)\dlb.h
! 	@$(CC) $(CFLAGS) $(SPECOPTS) /f- /Od /Fo$@ pager.c
! pickup.o: pickup.c $(HACK_H)
! pline.o: pline.c $(HACK_H) $(INCL)\epri.h
! polyself.o: polyself.c $(HACK_H)
! potion.o: potion.c $(HACK_H)
! pray.o: pray.c $(HACK_H) $(INCL)\epri.h
! priest.o: priest.c $(HACK_H) $(INCL)\mfndpos.h $(INCL)\eshk.h \
! 		$(INCL)\epri.h $(INCL)\emin.h
! quest.o: quest.c $(HACK_H) $(INCL)\qtext.h
! questpgr.o: questpgr.c $(HACK_H) $(INCL)\dlb.h $(INCL)\qtext.h
! read.o: read.c $(HACK_H)
! rect.o: rect.c $(HACK_H)
! region.o: region.c $(HACK_H)
! restore.o: restore.c $(HACK_H) $(INCL)\lev.h $(INCL)\tcap.h
! rip.o: rip.c $(HACK_H)
! rnd.o: rnd.c $(HACK_H)
! role.o: role.c $(HACK_H)
! rumors.o: rumors.c $(HACK_H) $(INCL)\lev.h $(INCL)\dlb.h
! save.o: save.c $(HACK_H) $(INCL)\lev.h
! shk.o: shk.c $(HACK_H) $(INCL)\eshk.h
! shknam.o: shknam.c $(HACK_H) $(INCL)\eshk.h
! sit.o: sit.c $(HACK_H) $(INCL)\artifact.h
! sounds.o: sounds.c $(HACK_H) $(INCL)\edog.h
! sp_lev.o: sp_lev.c $(HACK_H) $(INCL)\dlb.h $(INCL)\sp_lev.h
! spell.o: spell.c $(HACK_H)
! steal.o: steal.c $(HACK_H)
! steed.o: steed.c $(HACK_H)
! teleport.o: teleport.c $(HACK_H)
! timeout.o: timeout.c $(HACK_H) $(INCL)\lev.h
! topten.o: topten.c $(HACK_H) $(INCL)\dlb.h $(INCL)\patchlev.h
! track.o: track.c $(HACK_H)
! trap.o: trap.c $(HACK_H)
! u_init.o: u_init.c $(HACK_H)
! uhitm.o: uhitm.c $(HACK_H)
! vault.o: vault.c $(HACK_H) $(INCL)\vault.h
! version.o: version.c $(HACK_H) $(INCL)\date.h $(INCL)\patchlev.h
! vision.o: vision.c $(HACK_H) $(INCL)\vis_tab.h
! weapon.o: weapon.c $(HACK_H)
! were.o: were.c $(HACK_H)
! wield.o: wield.c $(HACK_H)
! windows.o: windows.c $(HACK_H) $(INCL)\wingem.h
! wizard.o: wizard.c $(HACK_H) $(INCL)\qtext.h
! worm.o: worm.c $(HACK_H) $(INCL)\lev.h
! worn.o: worn.c $(HACK_H)
! write.o: write.c $(HACK_H)
! zap.o: zap.c $(HACK_H)
  
  # end of file
