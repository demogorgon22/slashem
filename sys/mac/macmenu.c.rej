***************
*** 514,520 ****
  				if (**h > 31) {
  					**h = 31;
  				}
! 				BlockMove (*h, pName , **h + 1);
  				DisposeHandle (h);
  			}
  		}
--- 510,516 ----
  				if (**h > 31) {
  					**h = 31;
  				}
! 				BlockMove (*h, pName, **h + 1);
  				DisposeHandle (h);
  			}
  		}
***************
*** 839,852 ****
  void
  InitMenuRes()
  {
! 	static Boolean was_inited = 0 ;
  	short			i, j;
  	menuListHandle	mlHnd;
  	MenuHandle		mHnd;
  
  	if (was_inited)
  		return;
! 	was_inited = 1 ;
  
  	mustGetMenuAlerts();
  
--- 835,848 ----
  void
  InitMenuRes()
  {
! 	static Boolean was_inited = 0;
  	short			i, j;
  	menuListHandle	mlHnd;
  	MenuHandle		mHnd;
  
  	if (was_inited)
  		return;
! 	was_inited = 1;
  
  	mustGetMenuAlerts();
  
***************
*** 888,895 ****
  	short		i;
  
  	/*
! 	 *	if ( windowprocs != mac_procs ) {
! 	 *		return ;
  	 *	}
  	 */
  	/* determine the new menubar state */
--- 884,891 ----
  	short		i;
  
  	/*
! 	 *	if (windowprocs != mac_procs) {
! 	 *		return;
  	 *	}
  	 */
  	/* determine the new menubar state */
***************
*** 1109,1150 ****
  	}
  }
  
- static void
- openMap()
- {
- 	WindowPeek	peekWindow = *(WindowPeek*) LMGetWindowList();
- 
- 	while (peekWindow && (peekWindow->windowKind != WKND_MAP))
- 		peekWindow = peekWindow->nextWindow;
- 
- 	if (! peekWindow)
- 		return;				/* impossible? */
- 
- 	ShowWindow((WindowPtr) peekWindow);
- 	SelectWindow((WindowPtr) peekWindow);
- }
- 
- static void
- closeFrontWindow()
- {
- 	WindowPeek	peekWindow = (WindowPeek) FrontWindow();
- 
- 	if (! peekWindow)
- 		return;				/* impossible? */
- 	else if (peekWindow->windowKind < 0)
- 		CloseDeskAcc(peekWindow->windowKind);
- 	else if (peekWindow->windowKind == WKND_MAP)
- 		HideWindow((WindowPtr) peekWindow);
- 	else
- 		WindowGoAway((EventRecord *) 0L, (WindowPtr) peekWindow);
- }
- 
  
  static void
  askSave()
  {
! 	Boolean doSave = 1 ;
! 	Boolean doYes = 0 ;
  
  	if (theMenubar < mbarRegular) {
  	short	itemHit;
--- 1086,1097 ----
  	}
  }
  
  
  static void
  askSave()
  {
! 	Boolean doSave = 1;
! 	Boolean doYes = 0;
  
  	if (theMenubar < mbarRegular) {
  	short	itemHit;
***************
*** 1170,1179 ****
  static void
  askQuit()
  {
! 	Boolean doQuit = 1 ;
! 	Boolean doYes = 0 ;
! 	char *quitinput = "#quit";
  
  	if (theMenubar < mbarRegular) {
  	short	itemHit;
  
--- 1117,1132 ----
  static void
  askQuit()
  {
! 	Boolean doQuit = 1;
! 	Boolean doYes = 0;
! 	Boolean winMac;
! 	char *quitinput;
  
+ 	if (!strcmp (windowprocs.name, "mac"))
+ 		winMac = 1;
+ 	else
+ 		winMac = 0;
+ 		
  	if (theMenubar < mbarRegular) {
  	short	itemHit;
  
